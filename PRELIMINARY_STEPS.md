# Предварительные шаги перед запуском бота

Выполни эти шаги по порядку на Mac.

---

## 1. Python

- Убедись, что установлен Python 3.10+:
  ```bash
  python3 --version
  ```
- Если нет: установи через [python.org](https://www.python.org/downloads/) или Homebrew:
  ```bash
  brew install python@3.11
  ```

---

## 2. Telegram

- **Создать бота:** открой [@BotFather](https://t.me/BotFather) → `/newbot` → придумай имя и username → сохрани **токен**.
- **Канал для проверки подписки:**
  - Создай канал или используй существующий.
  - Добавь бота в канал как администратора (хотя бы с правом «смотреть участников»).
  - Узнай ID канала:
    - Перешли в канал любое сообщение боту [@userinfobot](https://t.me/userinfobot) — он покажет ID пересланного чата, либо
    - Используй ссылку вида `https://t.me/c/1234567890/1` — ID канала: `-100` + число (например `-1001234567890`).
  - Сохрани **username канала** (например `@alova_team`) и **channel_id** (число с минусом).
- **Закрытый канал (после оплаты):**
  - Создай отдельный приватный канал/супергруппу.
  - Добавь туда бота админом.
  - Сохрани **ссылку-приглашение** и **channel_id** закрытого канала.

---

## 3. Фото эксперта

- Положи личное фото Милы в папку `assets/` (например `assets/expert_photo.jpg`).
- В `.env` укажи имя файла: `EXPERT_PHOTO_PATH=expert_photo.jpg` (или полный путь к файлу, если хранишь вне проекта).

---

## 4. Окружение и зависимости

```bash
cd /Users/olgapotapova/Programming/SuperMila
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

## 5. Конфигурация

- Скопируй пример конфига:
  ```bash
  cp .env.example .env
  ```
- Открой `.env` и заполни:
  - `BOT_TOKEN` — токен от BotFather
  - `CHANNEL_USERNAME` — @username канала для проверки подписки
  - `CHANNEL_ID` — числовой ID этого канала (например -1001234567890)
  - `CHANNEL_INVITE_LINK` — ссылка на канал для кнопки «Подписаться» (например https://t.me/alova_team)
  - `CLOSED_CHANNEL_LINK` — ссылка на закрытый канал после оплаты
  - `EXPERT_PHOTO_PATH` — имя файла фото в `assets/` или путь
  - `DELAY_SECONDS` — задержка второго сообщения в секундах (по умолчанию 120)
  - Остальные переменные по необходимости (см. комментарии в `.env.example`).

---

## 6. Продамус (позже, для реальной оплаты)

- Зарегистрируйся на [saleums.com](https://saleums.com) (или актуальный домен Продамус).
- Создай товар/подписку на 490₽.
- Настрой приём: «Карты РФ» и «С любой точки мира» (два варианта оплаты).
- Получи API-ключи / webhook URL и добавь их в `.env` когда будешь подключать реальную оплату.

---

## 7. Запуск (локально)

```bash
source venv/bin/activate
python -m bot.main
```

Или через точку входа, если добавишь в `pyproject.toml`/`setup.py`:
```bash
python run_bot.py
```

---

## 8. Размещение бота (варианты)

Кратко (подробнее в README.md):

| Вариант | Плюсы | Минусы |
|--------|--------|--------|
| **VPS (Timeweb, Selectel, Reg.ru, зарубежные)** | Полный контроль, веб + бот на одном сервере | Нужна настройка сервера |
| **Heroku / Railway / Fly.io** | Быстрый деплой, не нужен свой сервер | Платно после бесплатного тира |
| **Сайт alova-team.ru (хостинг с Python)** | Всё в одном месте | Зависит от возможностей хостинга (cron/долгий процесс) |
| **Бесплатный VPS (Oracle Cloud и т.п.)** | Бесплатно | Ограничения по региону и правилам |

Рекомендация: для стабильной работы 24/7 — отдельный VPS или PaaS (Railway/Heroku). Сайт alova-team.ru можно использовать для лендинга и кнопки «Написать в бота», а бота держать на отдельном сервере.

---

## Чек-лист перед первым запуском

- [ ] Python 3.10+ установлен
- [ ] Бот создан в BotFather, токен сохранён
- [ ] Канал создан, бот добавлен как админ, известны CHANNEL_ID и CHANNEL_USERNAME
- [ ] Закрытый канал создан, ссылка сохранена в CLOSED_CHANNEL_LINK
- [ ] Фото эксперта лежит в `assets/`, путь указан в `.env`
- [ ] Файл `.env` создан и заполнен (без коммита в git)
- [ ] Выполнены `pip install -r requirements.txt` и `python -m bot.main`

После этого можно тестировать сценарий: /start → подписка → проверка → подарки → через 2 минуты сообщение про 490₽ → имитация оплаты → ссылка на закрытый канал.
